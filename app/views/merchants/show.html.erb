<h1><%= "#{@merchant.username}'s Profile" %></h1>

<section class="info">
  <h2>Your Info</h2>
  <ul>
    <li>
      Username: <%= @merchant.username %>
    </li>
    <li>
      email: <%= @merchant.email %>
    </li>
  </ul>
</section>

<section class="products">
  <h2>Your Products</h2>

  <table>
    <thead>
      <tr>
        <th>Product Name</th>
        <th>Inventory</th>
        <th>Price</th>
        <th>Number Sold</th>
        <th>Visible</th>
      </tr>
    </thead>
    <tbody>
      <% @products.each do |product| %>
      <tr>
        <td><%= link_to product.name, product_path(product) %></td>
        <td>
          <%= product.quantity == 0 ? "Out of Stock!" : product.quantity %>
        </td>
        <td><%= number_to_currency(product.price) %></td>
        <td><%= product.num_sold %></td>
        <% @visibility = product.visible ? "Visible" : "Hidden" %>
        <td><%= link_to @visibility, change_visibility_product_path(product), method: :patch %></td>
      </tr>
      <% end %>
    </tbody>
  </table>

</section>

<section class="orders">
  <h2>Your Orders</h2>

  <%= render partial: 'items', locals: { items: @paid, state: "paid", message: "Revenue from order items to be shipped" } %>
  <%= render partial: 'items', locals: { items: @complete, state: "complete", message: "Revenue from shipped items" } %>
  <%= render partial: 'items', locals: { items: @canceled, state: "canceled",  message: "Lost revenue from canceled items" } %>
</section>

<section class="total-revenue">
  <h2>Your Total Revenue</h2>
  <p><%= @merchant.total_revenue %></p>
</section>
